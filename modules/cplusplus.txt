RUN aptitude update
RUN aptitude install -y build-essential cmake cmake-curses-gui ninja-build pkg-config
RUN aptitude install -y libx11-dev libopenblas-dev liblapack-dev

# opencv

ARG opencv_version="3.1.0"
RUN cd /tmp & wget https://github.com/Itseez/opencv/archive/$opencv_version.zip
RUN cd /tmp & unzip $opencv_version.zip
RUN cd /tmp & git clone https://github.com/Itseez/opencv_contrib.git
RUN mkdir /tmp/opencv-$opencv_version/build
RUN cd /tmp/opencv-$opencv_version/build & \
  cmake .. -G"Ninja" -DCMAKE_BUILD_TYPE=RELEASE -DENABLE_AVX2=ON -DENABLE_SSE42=ON \
  ninja \
  ninja install

# dlib

ARG dlib_version="19.1"
RUN cd /tmp & wget http://dlib.net/files/dlib-$dlib_version.tar.bz2
RUN cd /tmp & tar xjf dlib-$dlib_version.tar.bz2
RUN mkdir /tmp/dlib-$dlib_version/build
RUN cd /tmp/dlib-$dlib_version/build \
  cmake .. -G"Ninja" -DCMAKE_BUILD_TYPE=RELEASE \
  ninja \
  ninja install
